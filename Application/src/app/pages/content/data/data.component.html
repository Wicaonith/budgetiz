<div class="main">
    <h1>Données</h1>

    <!-- Formulaire d'ajout de nouvelles Rubriques -->
    <div class="formAdd-form">
        <div>
            <!-- INPUT ID -->
            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>ID</mat-label>
                <input matInput disabled #addDataId placeholder="Ex. Habitat" value="{{lastId}}">
            </mat-form-field>
        </div>
        <div>
            <!-- COMBOBOX RUBRIQUE-->
            <mat-form-field appearance="outline">
                <mat-label>Mois</mat-label>
                <mat-select #addDataComboMonth>
                    <mat-option *ngFor="let month of months" [value]="month">
                        {{month}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <!-- COMBOBOX RUBRIQUE-->
            <mat-form-field appearance="outline">
                <mat-label>Rubrique mère</mat-label>
                <mat-select #addDataComboSection (selectionChange)="changeSection(addDataComboSection.value)">
                    <mat-option *ngFor="let section of sections" [value]="section.name">
                        {{section.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <!-- COMBOBOX SOUS-RUBRIQUE-->
            <mat-form-field appearance="outline">
                <mat-label>Sous-rubrique</mat-label>
                <mat-select #addDataComboUnderSection [disabled]="disabledCombobox">
                    <mat-option *ngFor="let undersection of undersections" [value]="undersection.name">
                        {{undersection.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <!-- INPUT COMTANT -->
            <mat-form-field class="example-full-width" appearance="outline">
                <mat-label>Montant</mat-label>
                <input matInput #addDataAmount placeholder="Montant" value="">
            </mat-form-field>
        </div>
        <div>
            <!-- COMBOBOX COMPTE-->
            <mat-form-field appearance="outline">
                <mat-label>Compte</mat-label>
                <mat-select #addDataComboAccount>
                    <mat-option *ngFor="let account of accounts" [value]="account.name">
                        {{account.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
        </div>
        <div>
            <!-- BUTTON-->
            <button mat-raised-button
                (click)="controlData(addDataId.value, addDataComboMonth.value, addDataComboSection.value, addDataComboUnderSection.value, addDataAmount.value, addDataComboAccount.value);createData(addDataId.value, addDataComboMonth.value, addDataComboSection.value, addDataComboUnderSection.value, addDataAmount.value, addDataComboAccount.value)">Enregistrer</button>
        </div>
    </div>
    <!-- Tableau contenant les données de toutes les transactions -->
    <table class="dataTable" mat-table [dataSource]="datas">

        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef> Libellé </th>
            <td mat-cell *matCellDef="let data"> {{data.id}} </td>
        </ng-container>

        <ng-container matColumnDef="month">
            <th mat-header-cell *matHeaderCellDef> Mois </th>
            <td mat-cell *matCellDef="let data"> {{data.month}} </td>
        </ng-container>

        <ng-container matColumnDef="section">
            <th mat-header-cell *matHeaderCellDef> Rubrique Mère </th>
            <td mat-cell *matCellDef="let data"> {{data.section.name}} </td>
        </ng-container>

        <ng-container matColumnDef="undersection">
            <th mat-header-cell *matHeaderCellDef> Sous-Rubrique </th>
            <td mat-cell *matCellDef="let data"> {{data.undersection.name}} </td>
        </ng-container>

        <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef> Montant </th>
            <td mat-cell *matCellDef="let data"> {{data.amount}} </td>
        </ng-container>

        <ng-container matColumnDef="account">
            <th mat-header-cell *matHeaderCellDef> Compte </th>
            <td mat-cell *matCellDef="let data"> {{data.account.name}} </td>
        </ng-container>

        <ng-container matColumnDef="remove">
            <th mat-header-cell *matHeaderCellDef> Supprimer </th>
            <td mat-cell *matCellDef="let data">
                <button mat-flat-button color="basic" aria-label="Supprimer" (click)="removeData(data)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef=" datasColumns"></tr>
        <tr mat-row *matRowDef="let rowData; columns: datasColumns"></tr>
    </table>
</div>